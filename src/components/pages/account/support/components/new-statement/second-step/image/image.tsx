import Image from "next/image";
import { UseFormReturn } from "react-hook-form";
import { NewStatementForm } from "../../new-statement";
import css from "./image.module.css";

interface Props {
	index: number;
	form: UseFormReturn<NewStatementForm>;
}

const StatementImage = ({ index, form }: Props) => {
	const files = form.watch("files");

	const onRemove = () => {
		if (!files) return;
		form.setValue(
			"files",
			files.filter((_, i) => i !== index)
		);
	};

	return (
		<div className={css.wrapper}>
			<button onClick={onRemove} className={css.close} type={"button"}>
				<svg
					width='12'
					height='12'
					viewBox='0 0 10 10'
					fill='none'
					xmlns='http://www.w3.org/2000/svg'
				>
					<path
						d='M0.383904 8.39107C0.431045 8.27726 0.500137 8.17386 0.587241 8.08675L3.67513 5.00003L0.587241 1.91331C0.500137 1.82621 0.431045 1.72281 0.383904 1.609C0.336764 1.49519 0.3125 1.37322 0.3125 1.25003C0.3125 1.12685 0.336764 1.00487 0.383904 0.891068C0.431045 0.777262 0.500137 0.673855 0.587241 0.586752C0.674344 0.499648 0.777751 0.430554 0.891557 0.383414C1.00536 0.336274 1.12734 0.312012 1.25052 0.312012C1.3737 0.312012 1.49568 0.336274 1.60949 0.383414C1.72329 0.430554 1.8267 0.499648 1.9138 0.586752L5.00052 3.67464L8.08724 0.586752C8.26315 0.410838 8.50174 0.312012 8.75052 0.312012C8.9993 0.312012 9.23789 0.410838 9.41381 0.586752C9.58972 0.762665 9.68854 1.00126 9.68854 1.25003C9.68854 1.49881 9.58972 1.7374 9.41381 1.91331L6.32591 5.00003L9.41381 8.08675C9.50091 8.17386 9.57 8.27726 9.61714 8.39107C9.66428 8.50487 9.68854 8.62685 9.68854 8.75003C9.68854 8.87322 9.66428 8.99519 9.61714 9.109C9.57 9.2228 9.50091 9.32621 9.41381 9.41332C9.3267 9.50042 9.22329 9.56951 9.10949 9.61665C8.99568 9.66379 8.8737 9.68806 8.75052 9.68806C8.62734 9.68806 8.50536 9.66379 8.39156 9.61665C8.27775 9.56951 8.17435 9.50042 8.08724 9.41332L5.00052 6.32542L1.9138 9.41332C1.8267 9.50042 1.72329 9.56951 1.60949 9.61665C1.49568 9.66379 1.3737 9.68806 1.25052 9.68806C1.12734 9.68806 1.00536 9.66379 0.891557 9.61665C0.777751 9.56951 0.674344 9.50042 0.587241 9.41332C0.500137 9.32621 0.431045 9.2228 0.383904 9.109C0.336764 8.99519 0.3125 8.87322 0.3125 8.75003C0.3125 8.62685 0.336764 8.50487 0.383904 8.39107Z'
						fill='#232323'
					/>
				</svg>
			</button>
			<div className={css.delete}>
				<button onClick={onRemove} type={"button"} className={css.btn}>
					<svg
						width='46'
						height='50'
						viewBox='0 0 46 50'
						fill='none'
						xmlns='http://www.w3.org/2000/svg'
					>
						<path
							d='M43.625 8.25H34.25V6.375C34.25 4.88316 33.6574 3.45242 32.6025 2.39752C31.5476 1.34263 30.1168 0.75 28.625 0.75H17.375C15.8832 0.75 14.4524 1.34263 13.3975 2.39752C12.3426 3.45242 11.75 4.88316 11.75 6.375V8.25H2.375C1.87772 8.25 1.40081 8.44754 1.04918 8.79918C0.697544 9.15081 0.5 9.62772 0.5 10.125C0.5 10.6223 0.697544 11.0992 1.04918 11.4508C1.40081 11.8025 1.87772 12 2.375 12H4.25V45.75C4.25 46.7446 4.64509 47.6984 5.34835 48.4016C6.05161 49.1049 7.00544 49.5 8 49.5H38C38.9946 49.5 39.9484 49.1049 40.6516 48.4016C41.3549 47.6984 41.75 46.7446 41.75 45.75V12H43.625C44.1223 12 44.5992 11.8025 44.9508 11.4508C45.3025 11.0992 45.5 10.6223 45.5 10.125C45.5 9.62772 45.3025 9.15081 44.9508 8.79918C44.5992 8.44754 44.1223 8.25 43.625 8.25ZM15.5 6.375C15.5 5.87772 15.6975 5.40081 16.0492 5.04918C16.4008 4.69754 16.8777 4.5 17.375 4.5H28.625C29.1223 4.5 29.5992 4.69754 29.9508 5.04918C30.3025 5.40081 30.5 5.87772 30.5 6.375V8.25H15.5V6.375ZM38 45.75H8V12H38V45.75ZM19.25 21.375V36.375C19.25 36.8723 19.0525 37.3492 18.7008 37.7008C18.3492 38.0525 17.8723 38.25 17.375 38.25C16.8777 38.25 16.4008 38.0525 16.0492 37.7008C15.6975 37.3492 15.5 36.8723 15.5 36.375V21.375C15.5 20.8777 15.6975 20.4008 16.0492 20.0492C16.4008 19.6975 16.8777 19.5 17.375 19.5C17.8723 19.5 18.3492 19.6975 18.7008 20.0492C19.0525 20.4008 19.25 20.8777 19.25 21.375ZM30.5 21.375V36.375C30.5 36.8723 30.3025 37.3492 29.9508 37.7008C29.5992 38.0525 29.1223 38.25 28.625 38.25C28.1277 38.25 27.6508 38.0525 27.2992 37.7008C26.9475 37.3492 26.75 36.8723 26.75 36.375V21.375C26.75 20.8777 26.9475 20.4008 27.2992 20.0492C27.6508 19.6975 28.1277 19.5 28.625 19.5C29.1223 19.5 29.5992 19.6975 29.9508 20.0492C30.3025 20.4008 30.5 20.8777 30.5 21.375Z'
							fill='white'
						/>
					</svg>
				</button>
			</div>
			<Image
				className={css.img}
				src={URL.createObjectURL(files[index])}
				alt={""}
				width={80}
				height={80}
			/>
		</div>
	);
};

export default StatementImage;
